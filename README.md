# Xrayé›†ç¾¤ç®¡ç†ç³»ç»Ÿ

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Python](https://img.shields.io/badge/python-3.11+-green.svg)
![License](https://img.shields.io/badge/license-MIT-orange.svg)
![Status](https://img.shields.io/badge/status-production--ready-brightgreen.svg)

åŸºäºFlaskçš„Xrayå¤šèŠ‚ç‚¹é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒVLESS+XTLS-Visionã€SplitHTTPã€Hysteria2å¤šç§åè®®ã€‚

[å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æ–‡æ¡£](#æ–‡æ¡£) â€¢ [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [æ¶æ„](#ç³»ç»Ÿæ¶æ„) â€¢ [è´¡çŒ®](#è´¡çŒ®)

</div>

---

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [å®‰å…¨æ€§](#å®‰å…¨æ€§)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [è´¡çŒ®](#è´¡çŒ®)
- [è®¸å¯è¯](#è®¸å¯è¯)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ¯ **å¤šèŠ‚ç‚¹ç®¡ç†** - é›†ä¸­ç®¡ç†å¤šä¸ªXrayèŠ‚ç‚¹ï¼Œç»Ÿä¸€é…ç½®å’Œç›‘æ§
- ğŸ” **å¤šåè®®æ”¯æŒ** - VLESS+XTLS-Visionã€SplitHTTPã€Hysteria2
- ğŸ“Š **å®æ—¶ç›‘æ§** - èŠ‚ç‚¹çŠ¶æ€ã€æµé‡ç»Ÿè®¡ã€ç”¨æˆ·è¿æ¥å®æ—¶ç›‘æ§
- âš¡ **ä¸€é”®éƒ¨ç½²** - è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬ï¼Œ5åˆ†é’Ÿå®Œæˆéƒ¨ç½²
- ğŸ”„ **é…ç½®åŒæ­¥** - èŠ‚ç‚¹é…ç½®è‡ªåŠ¨åŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·è´¦å·ç®¡ç†ã€æµé‡é™åˆ¶ã€åˆ°æœŸæ—¶é—´æ§åˆ¶
- ğŸ“ˆ **æ•°æ®ç»Ÿè®¡** - æµé‡ç»Ÿè®¡ã€è¿æ¥æ•°ç»Ÿè®¡ã€èŠ‚ç‚¹è´Ÿè½½åˆ†æ
- ğŸ”” **å‘Šè­¦é€šçŸ¥** - èŠ‚ç‚¹ç¦»çº¿ã€æµé‡è¶…é™è‡ªåŠ¨å‘Šè­¦

### å®‰å…¨ç‰¹æ€§

- ğŸ”’ **HTTPSå¼ºåˆ¶** - é€šè¿‡Caddyå®ç°å…¨ç«™HTTPSåŠ å¯†
- ğŸ›¡ï¸ **APIå®‰å…¨** - HMAC-SHA256ç­¾åéªŒè¯ï¼Œé˜²æ­¢APIæ»¥ç”¨
- ğŸš« **è¾“å…¥è¿‡æ»¤** - ä¸¥æ ¼çš„è¾“å…¥éªŒè¯ï¼Œé˜²æ­¢å‘½ä»¤æ³¨å…¥æ”»å‡»
- ğŸŒ **ç½‘ç»œéš”ç¦»** - Dockerå†…éƒ¨ç½‘ç»œé€šä¿¡ï¼Œæœ€å°åŒ–æ”»å‡»é¢
- ğŸ“ **éšè—è·¯å¾„** - APIæ¥å£ä½¿ç”¨SHA256è¡ç”Ÿçš„éšè—è·¯å¾„
- ğŸ” **å¯†é’¥ç®¡ç†** - è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†APIå¯†é’¥
- ğŸ›¡ï¸ **CSPç­–ç•¥** - å†…å®¹å®‰å…¨ç­–ç•¥é˜²æ­¢XSSæ”»å‡»
- ğŸ”’ **CSRFä¿æŠ¤** - é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»

### ç®¡ç†åŠŸèƒ½

- ğŸ“± **Webæ§åˆ¶é¢æ¿** - ç›´è§‚çš„Webç•Œé¢ï¼Œæ˜“äºç®¡ç†
- ğŸ”§ **èŠ‚ç‚¹é…ç½®** - çµæ´»çš„èŠ‚ç‚¹é…ç½®é€‰é¡¹
- ğŸ“ **æ—¥å¿—æŸ¥çœ‹** - å®æ—¶æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—
- ğŸ”„ **è¿œç¨‹é‡å¯** - è¿œç¨‹é‡å¯XrayæœåŠ¡
- ğŸ“Š **æµé‡åˆ†æ** - è¯¦ç»†çš„æµé‡ä½¿ç”¨åˆ†æ
- ğŸ‘¤ **æƒé™ç®¡ç†** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·/ç®¡ç†å‘˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MasterèŠ‚ç‚¹ (æ§åˆ¶é¢æ¿)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Caddy   â”‚  â”‚  Flask   â”‚  â”‚PostgreSQLâ”‚  â”‚  Redis   â”‚   â”‚
â”‚  â”‚  (HTTPS) â”‚â”€â–¶â”‚  (Web)   â”‚â”€â–¶â”‚   (DB)   â”‚  â”‚ (Cache)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                                       â”‚
â”‚                      â”‚ API (HMACç­¾å)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
        â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Worker Node 1â”‚ â”‚ Worker Node 2â”‚ â”‚ Worker Node Nâ”‚
â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Caddy   â”‚ â”‚ â”‚ â”‚  Caddy   â”‚ â”‚ â”‚ â”‚  Caddy   â”‚ â”‚
â”‚ â”‚ (Fallbackâ”‚ â”‚ â”‚ â”‚ (Fallbackâ”‚ â”‚ â”‚ â”‚ (Fallbackâ”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚      â”‚       â”‚ â”‚      â”‚       â”‚ â”‚      â”‚       â”‚
â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Xray   â”‚ â”‚ â”‚ â”‚   Xray   â”‚ â”‚ â”‚ â”‚   Xray   â”‚ â”‚
â”‚ â”‚  (Proxy) â”‚ â”‚ â”‚ â”‚  (Proxy) â”‚ â”‚ â”‚ â”‚  (Proxy) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚      â”‚       â”‚ â”‚      â”‚       â”‚ â”‚      â”‚       â”‚
â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Agent   â”‚ â”‚ â”‚ â”‚  Agent   â”‚ â”‚ â”‚ â”‚  Agent   â”‚ â”‚
â”‚ â”‚(ç®¡ç†API) â”‚ â”‚ â”‚ â”‚(ç®¡ç†API) â”‚ â”‚ â”‚ â”‚(ç®¡ç†API) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
                  äº’è”ç½‘ç”¨æˆ·
```

### ç»„ä»¶è¯´æ˜

**MasterèŠ‚ç‚¹**:
- **Caddy**: åå‘ä»£ç†ï¼Œè‡ªåŠ¨HTTPSè¯ä¹¦ç®¡ç†
- **Flask Web**: æ§åˆ¶é¢æ¿ï¼Œæä¾›Webç•Œé¢å’ŒAPI
- **PostgreSQL**: å­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯ã€ç”¨æˆ·æ•°æ®ã€ç»Ÿè®¡ä¿¡æ¯
- **Redis**: ç¼“å­˜å’Œä¼šè¯å­˜å‚¨

**WorkerèŠ‚ç‚¹**:
- **Xray**: ä»£ç†æœåŠ¡æ ¸å¿ƒï¼Œå¤„ç†ç”¨æˆ·æµé‡
- **Caddy**: æä¾›Fallbackä¼ªè£…å’ŒSSLç»ˆæ­¢
- **Agent**: èŠ‚ç‚¹ç®¡ç†ç¨‹åºï¼Œä¸Masteré€šä¿¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- Docker 20.10+
- Docker Compose 2.0+
- æœ‰æ•ˆçš„åŸŸåï¼ˆéœ€è¦DNSè§£æï¼‰

### ä¸€é”®å®‰è£…

```bash
# ä¸‹è½½é¡¹ç›®
git clone https://github.com/your-repo/xray-cluster.git
cd xray-cluster

# å®‰è£…MasterèŠ‚ç‚¹ï¼ˆæ§åˆ¶é¢æ¿ï¼‰
sudo bash install.sh --master

# å®‰è£…WorkerèŠ‚ç‚¹ï¼ˆä»£ç†èŠ‚ç‚¹ï¼‰
sudo bash install.sh --node
```

### è®¿é—®æ§åˆ¶é¢æ¿

å®‰è£…å®Œæˆåï¼Œè®¿é—®ä½ é…ç½®çš„åŸŸåï¼š

```
https://panel.example.com
```

ä½¿ç”¨å®‰è£…æ—¶ç”Ÿæˆçš„ç®¡ç†å‘˜è´¦å·ç™»å½•ã€‚

## ğŸ“¦ å®‰è£…éƒ¨ç½²

è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ [DEPLOYMENT.md](DEPLOYMENT.md)

### MasterèŠ‚ç‚¹éƒ¨ç½²

```bash
# 1. è¿è¡Œå®‰è£…è„šæœ¬
sudo ./install.sh --master

# 2. è¾“å…¥MasteråŸŸå
# ä¾‹å¦‚: panel.example.com

# 3. ä¿å­˜ç”Ÿæˆçš„é›†ç¾¤å¯†é’¥
# è¿™ä¸ªå¯†é’¥ç”¨äºWorkerèŠ‚ç‚¹è¿æ¥

# 4. è®¿é—®æ§åˆ¶é¢æ¿
# https://panel.example.com
```

### WorkerèŠ‚ç‚¹éƒ¨ç½²

```bash
# 1. è¿è¡Œå®‰è£…è„šæœ¬
sudo ./install.sh --node

# 2. è¾“å…¥é›†ç¾¤å¯†é’¥ï¼ˆä»Masterè·å¾—ï¼‰

# 3. è¾“å…¥MasteråŸŸå
# ä¾‹å¦‚: panel.example.com

# 4. è¾“å…¥æœ¬èŠ‚ç‚¹åŸŸå
# ä¾‹å¦‚: node1.example.com

# 5. èŠ‚ç‚¹è‡ªåŠ¨æ³¨å†Œåˆ°Master
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æ·»åŠ èŠ‚ç‚¹

1. ç™»å½•Masteræ§åˆ¶é¢æ¿
2. è¿›å…¥"èŠ‚ç‚¹ç®¡ç†" â†’ "æ·»åŠ èŠ‚ç‚¹"
3. å¡«å†™èŠ‚ç‚¹ä¿¡æ¯ï¼š
   - èŠ‚ç‚¹åç§°
   - æœåŠ¡å™¨IP
   - ä½ç½®
   - åè®®é…ç½®
4. ä¿å­˜å¹¶è·å–èŠ‚ç‚¹Token
5. åœ¨WorkeræœåŠ¡å™¨ä¸Šä½¿ç”¨Tokenå®‰è£…

### ç®¡ç†ç”¨æˆ·

1. è¿›å…¥"ç”¨æˆ·ç®¡ç†"
2. ç‚¹å‡»"æ·»åŠ ç”¨æˆ·"
3. é…ç½®ç”¨æˆ·å‚æ•°ï¼š
   - ç”¨æˆ·å
   - å¯†ç 
   - æµé‡é™åˆ¶
   - åˆ°æœŸæ—¶é—´
   - åˆ†é…èŠ‚ç‚¹
4. ç”Ÿæˆç”¨æˆ·é…ç½®é“¾æ¥

### æŸ¥çœ‹ç»Ÿè®¡

- **ä»ªè¡¨æ¿**: æ€»è§ˆæ‰€æœ‰èŠ‚ç‚¹å’Œç”¨æˆ·ç»Ÿè®¡
- **èŠ‚ç‚¹è¯¦æƒ…**: æŸ¥çœ‹å•ä¸ªèŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯
- **æµé‡ç»Ÿè®¡**: æŸ¥çœ‹æµé‡ä½¿ç”¨è¶‹åŠ¿
- **æ—¥å¿—æŸ¥çœ‹**: å®æ—¶æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—

## ğŸ“š APIæ–‡æ¡£

å®Œæ•´çš„APIæ–‡æ¡£è¯·å‚è€ƒ [API.md](API.md)

### Master APIç¤ºä¾‹

```bash
# èŠ‚ç‚¹æ³¨å†Œ
curl -X POST https://panel.example.com/api/node/register \
  -H "Content-Type: application/json" \
  -d '{"token": "your-node-token", "timestamp": 1234567890}'

# å¿ƒè·³ä¸ŠæŠ¥
curl -X POST https://panel.example.com/api/node/heartbeat \
  -H "Content-Type: application/json" \
  -d '{
    "node_id": 1,
    "api_secret": "your-api-secret",
    "timestamp": 1234567890,
    "stats": {...}
  }'
```

### Worker APIç¤ºä¾‹

```python
import requests
import hmac
import hashlib
import json

# ç”Ÿæˆç­¾å
def sign_request(data, secret):
    message = json.dumps(data, sort_keys=True).encode()
    return hmac.new(secret.encode(), message, hashlib.sha256).hexdigest()

# é‡å¯Xray
data = {"timestamp": 1234567890}
signature = sign_request(data, "your-api-secret")

response = requests.post(
    "https://node1.example.com/api/restart",
    json=data,
    headers={"X-Signature": signature}
)
```

## ğŸ”’ å®‰å…¨æ€§

### å®‰å…¨ç‰¹æ€§

1. **ä¼ è¾“åŠ å¯†**: æ‰€æœ‰é€šä¿¡ä½¿ç”¨HTTPS/TLS 1.3åŠ å¯†
2. **APIç­¾å**: HMAC-SHA256ç­¾åéªŒè¯æ‰€æœ‰APIè¯·æ±‚
3. **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œæ¸…ç†
4. **å‘½ä»¤ç™½åå•**: åªå…è®¸æ‰§è¡Œé¢„å®šä¹‰çš„å®‰å…¨å‘½ä»¤
5. **ç½‘ç»œéš”ç¦»**: Dockerç½‘ç»œéš”ç¦»ï¼Œæœ€å°åŒ–æ”»å‡»é¢
6. **éšè—è·¯å¾„**: APIä½¿ç”¨éšæœºç”Ÿæˆçš„éšè—è·¯å¾„
7. **å®‰å…¨å¤´**: CSPã€HSTSã€X-Frame-Optionsç­‰å®‰å…¨å¤´

### å®‰å…¨å»ºè®®

```bash
# 1. é…ç½®é˜²ç«å¢™
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable

# 2. å®šæœŸæ›´æ–°
sudo apt update && sudo apt upgrade -y

# 3. å®šæœŸå¤‡ä»½
# å‚è€ƒ DEPLOYMENT.md ä¸­çš„å¤‡ä»½ç­–ç•¥

# 4. ç›‘æ§æ—¥å¿—
docker-compose logs -f

# 5. å®šæœŸè½®æ¢å¯†é’¥
# åœ¨æ§åˆ¶é¢æ¿ä¸­é‡æ–°ç”ŸæˆAPIå¯†é’¥
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ç³»ç»Ÿä¼˜åŒ–

```bash
# å¯ç”¨BBRæ‹¥å¡æ§åˆ¶
echo "net.core.default_qdisc=fq" >> /etc/sysctl.conf
echo "net.ipv4.tcp_congestion_control=bbr" >> /etc/sysctl.conf
sysctl -p

# ä¼˜åŒ–ç½‘ç»œç¼“å†²åŒº
echo "net.core.rmem_max=134217728" >> /etc/sysctl.conf
echo "net.core.wmem_max=134217728" >> /etc/sysctl.conf
sysctl -p
```

### æ•°æ®åº“ä¼˜åŒ–

```yaml
# docker-compose.yml
environment:
  - POSTGRES_SHARED_BUFFERS=256MB
  - POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
  - POSTGRES_MAX_CONNECTIONS=200
```

### ç¼“å­˜ç­–ç•¥

- Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- èŠ‚ç‚¹çŠ¶æ€ç¼“å­˜60ç§’
- ç»Ÿè®¡æ•°æ®ç¼“å­˜5åˆ†é’Ÿ

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: Masteræ— æ³•è®¿é—®**
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
cd /opt/xray-cluster/master
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

**Q: èŠ‚ç‚¹æ— æ³•è¿æ¥Master**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://panel.example.com

# æ£€æŸ¥Agentæ—¥å¿—
cd /opt/xray-cluster/node
docker-compose logs -f agent
```

**Q: XrayæœåŠ¡å¼‚å¸¸**
```bash
# æŸ¥çœ‹Xrayæ—¥å¿—
docker-compose logs -f xray

# éªŒè¯é…ç½®
docker-compose exec xray xray -test -config /etc/xray/config.json
```

æ›´å¤šæ•…éšœæ’æŸ¥ä¿¡æ¯è¯·å‚è€ƒ [DEPLOYMENT.md](DEPLOYMENT.md#æ•…éšœæ’æŸ¥)

## ğŸ› ï¸ å¼€å‘æŒ‡å—

è¯¦ç»†çš„å¼€å‘æŒ‡å—è¯·å‚è€ƒ [DEVELOPMENT.md](DEVELOPMENT.md)

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/xray-cluster.git
cd xray-cluster

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œæµ‹è¯•
python test_project.py

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd master
python app.py
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python test_project.py

# æ£€æŸ¥ä»£ç é£æ ¼
flake8 master/app.py node/agent.py

# æ ¼å¼åŒ–ä»£ç 
black master/app.py node/agent.py
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

### è´¡çŒ®æµç¨‹

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ

- éµå¾ªPEP 8 Pythonä»£ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [Xray-core](https://github.com/XTLS/Xray-core) - å¼ºå¤§çš„ä»£ç†å·¥å…·
- [Flask](https://flask.palletsprojects.com/) - Python Webæ¡†æ¶
- [Caddy](https://caddyserver.com/) - ç°ä»£åŒ–çš„WebæœåŠ¡å™¨
- [Docker](https://www.docker.com/) - å®¹å™¨åŒ–å¹³å°

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/your-repo/xray-cluster/issues)
- Email: support@example.com
- æ–‡æ¡£: [åœ¨çº¿æ–‡æ¡£](https://docs.example.com)

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] Webç•Œé¢ä¼˜åŒ–
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] æ›´å¤šåè®®æ”¯æŒ
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿
- [ ] å‘Šè­¦é€šçŸ¥ç³»ç»Ÿ
- [ ] ç”¨æˆ·è‡ªåŠ©æœåŠ¡

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStarï¼â­**

Made with â¤ï¸ by Xray Cluster Team

</div>
